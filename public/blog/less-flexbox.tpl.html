<article class="main-root"><header class="content-header"><nav id="breadcrumb"><div class="container"><div itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/blog.html" itemprop="url"><span itemprop="title">Blog</span></a></div></div></nav><div class="content-header-title"><div class="container"><h1 id="main-title">flexboxのためのLESSを作成する</h1></div></div><div class="content-header-meta"><div class="container"><div id="article-date"><div id="article-date-created"><time>2015-03-18</time></div><hr/><div id="article-date-updated"><time>2015-04-17</time></div></div><div id="article-tags"><ul><li><a href="/blog/tag/CSS.html" class="button">CSS</a></li><li><a href="/blog/tag/LESS.html" class="button">LESS</a></li></ul></div><div id="article-toc"><div class="container"><ol><li><a href="#display">display</a></li><li><a href="#flex-direction">flex-direction</a></li><li><a href="#flex-wrap">flex-wrap</a></li><li><a href="#flex">flex</a><ol><li><a href="#flex-grow">flex-grow</a></li><li><a href="#flex-shrink">flex-shrink</a></li><li><a href="#flex-basis">flex-basis</a></li></ol></li><li><a href="#align-items">align-items</a></li><li><a href="#justify-content">justify-content</a></li><li><a href="#align-self">align-self</a></li><li><a href="#layout-less">完成ファイル</a></li><li><a href="#bibliography">参照文献</a></li></ol></div></div></div></div></header><div class="content-body"><div class="container"><div class="paragraph">
<p>PolymerやAngular Material Designでも使われているので、すでになじみのあるであろうflexboxなんだけれども、実際に自分でCSSを書くとなると参考になる文書がまだ少ない印象。XAMLに近い感じで、floatやpositionを使うよりも簡単でわかりやすく柔軟なレイアウトが実現できます。</p>
</div>
<div class="paragraph">
<p>この記事ではflexboxの学習をしつつLESSの作成をしていきますが、それにあたって参考にするのは<a href="https://github.com/Polymer/layout">Polymerのlayout</a>です。以前は独自の属性を使っていたのだけども、今年になってからクラスベースのものに変更されています。</p>
</div>
<div class="paragraph">
<p>ベンダプレフィックスはautoprefixerを使用するため、このページではすべて省略しています。</p>
</div>
<div class="sect1">
<h2 id="display">display</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.layout</span> {
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.horizontal</span>,
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.horizontal-reverse</span>,
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.vertical</span>,
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.vertical-reverse</span> {
        <span class="hljs-attribute">display</span>: flex;
    }

    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.inline</span> {
        <span class="hljs-attribute">display</span>: inline-flex;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>flexboxを使うための指定です。<code>flex</code>と<code>inline-flex</code>の違いは<code>block</code>と<code>inline-block</code>の違いを考えるとわかりやすい。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="flex-direction">flex-direction</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.layout</span> {
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.horizontal</span> {
        <span class="hljs-attribute">flex-direction</span>: row;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.horizontal-reverse</span> {
        <span class="hljs-attribute">flex-direction</span>: row-reverse;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.vertical</span> {
        <span class="hljs-attribute">flex-direction</span>: column;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.vertical-reverse</span> {
        <span class="hljs-attribute">flex-direction</span>: column-reverse;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>子要素の配置される方向、初期値は<code>row</code>。<code>writing mode</code>によって結果が異なる、つまり文字の流れる方向が左から右かその逆かでレイアウトが変更されるんだけども、基本的に日本語をつかう場面で気にすることはないはず。仕様書では一般的な日本語環境で<code>flex-direction</code>が<code>row</code>のときの水平方向を<code>main axis</code>、垂直方向を<code>cross axis</code>と表現されています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>row</code>は指定した要素の子要素が水平方向に並ぶ</p>
</li>
<li>
<p><code>row-reverse</code>にすると並び順のソートが逆になる</p>
</li>
<li>
<p><code>column</code>は指定した要素の子要素が垂直方向に並ぶ</p>
</li>
<li>
<p><code>column-reverse</code>にすると並び順のソートが逆になる</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ディスプレイの幅によってこの<code>row</code>と<code>column</code>を変更する、というのは今後よくみる一般的な手法になるんじゃないおもう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="flex-wrap">flex-wrap</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.layout</span> {
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.wrap</span> {
        <span class="hljs-attribute">flex-wrap</span>: wrap;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.wrap-reverse</span> {
        <span class="hljs-attribute">flex-wrap</span>: wrap-reverse;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>おさまりきらなかった子要素の折り返しの処理方法を指定します。初期値は<code>no-wrap</code>で折り返しをせず、一列に収めるようなレイアウトになります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>wrap</code>は子要素を<code>writing mode</code>に沿った形で折り返す</p>
</li>
<li>
<p><code>wrap-reverse</code>は子要素を<code>writing mode</code>の流れとは逆方向に折り返す</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>wrap</code>は写真のギャラリーのようなものに使うことが多くなりそう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="flex">flex</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.flex-auto</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span> <span class="hljs-number">1</span> auto;
}
<span class="hljs-class">.flex-none</span> {
    <span class="hljs-attribute">flex</span>: none;
}
<span class="hljs-class">.flex</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-class">.generate-flex</span>(<span class="hljs-number">12</span>);
<span class="hljs-class">.generate-flex</span>(<span class="hljs-variable">@n</span>, <span class="hljs-variable">@i</span>: <span class="hljs-number">1</span>) <span class="hljs-keyword">when</span> (<span class="hljs-variable">@i</span> =&lt; <span class="hljs-variable">@n</span>) {
    <span class="hljs-class">.flex-</span><span class="hljs-variable">@{i}</span> {
        <span class="hljs-attribute">flex</span>: <span class="hljs-variable">@i</span>;
    }
    <span class="hljs-class">.generate-flex</span>(<span class="hljs-variable">@n</span>, (<span class="hljs-variable">@i</span> + <span class="hljs-number">1</span>));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>他言語でこういったレイアウトに親しみがない場合ちょっとわかりにくいかもしれません。左から<code>flex-grow flex-shrin flex-basis</code>の順です。</p>
</div>
<div class="sect2">
<h3 id="flex-grow">flex-grow</h3>
<div class="paragraph">
<p>列に余白ができたとき、空白を埋める子要素の比率です。</p>
</div>
<div class="paragraph">
<p>初期値が<code>0</code>で、これは本来の要素の大きさそのままになります。省略されると<code>0</code>ではなく<code>1</code>になります。</p>
</div>
<div class="paragraph">
<p><code>1</code>以上はその要素が余白を埋める比率になる。このあたりは実際に指定してみたほうが理解しやすい。もしXAMLを理解しているのであれば<code>Grid</code>の<code>width</code>に<code>1*</code>や<code>3*</code>と指定したときと同じような感じになると考えるとわかりやすい。</p>
</div>
</div>
<div class="sect2">
<h3 id="flex-shrink">flex-shrink</h3>
<div class="paragraph">
<p><code>flex-grow</code>が余白ができたときの指定であれば、こちらは逆に余裕がなくなった場合の指定。<code>flex-wrap</code>を<code>wrap</code>にすると改行されることになって余裕がなくなることはないので、<code>flex-wrap</code>を<code>no-wrap</code>のときに必要になる可能性のあるプロパティになるとおもう。</p>
</div>
<div class="paragraph">
<p>初期値が<code>1</code>で、他の子要素に対する比率になる。数値が大きくなるとそのぶん圧縮率が大きくなる、つまり数値が大きいほど要素が小さくなるということ。この圧縮率は<code>flex-basis</code>で指定された数値に影響をうけます。</p>
</div>
<div class="paragraph">
<p><code>flex-grow</code>と同様に<code>0</code>にすると本来の要素のサイズを維持します。</p>
</div>
</div>
<div class="sect2">
<h3 id="flex-basis">flex-basis</h3>
<div class="paragraph">
<p>基準になるサイズを指定します。</p>
</div>
<div class="paragraph">
<p>この値を<code>auto</code>にすると<code>width</code>もしくは<code>height</code>の値が適用される。<code>flex-direction</code>が<code>row</code>であれば<code>width</code>で、<code>column</code>であれば<code>heigth</code>でmain axisに影響を受けます。</p>
</div>
<div class="paragraph">
<p>Shorthandで省略されると<code>0%</code>になる。なので<code>flex: 0;</code>のような記述が単独で使用されることはありえません。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="align-items">align-items</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.layout</span> {
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.start</span> {
        <span class="hljs-attribute">align-items</span>: flex-start;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.center</span>,
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.center-center</span> {
        <span class="hljs-attribute">align-items</span>: center;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.end</span> {
        <span class="hljs-attribute">align-items</span>: flex-end;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>cross axis方向からの位置を指定します。<code>flex-direction</code>が<code>row</code>であれば垂直方向で、<code>column</code>であれば水平方向の位置ということになる。これはflex containersである<code>.layout</code>に指定します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="justify-content">justify-content</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.layout</span> {
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.start-justified</span> {
        <span class="hljs-attribute">justify-content</span>: flex-start;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.center-justified</span>,
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.center-center</span> {
        <span class="hljs-attribute">justify-content</span>: center;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.end-justified</span> {
        <span class="hljs-attribute">justify-content</span>: flex-end;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.around-justified</span> {
        <span class="hljs-attribute">justify-content</span>: space-around;
    }
    <span class="hljs-keyword">&amp;</span><span class="hljs-class">.justified</span> {
        <span class="hljs-attribute">justify-content</span>: space-between;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>main axis方向からの位置を指定します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>space-around</code>は余白ができたときに両サイドを端を含めて均等にスペースをとり、両サイドの端の間隔はコンテンツのスペースの半分になる</p>
</li>
<li>
<p><code>space-between</code>は余白ができたときに均等にスペースをとるが、両サイドの端にはスペースを作らない</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="align-self">align-self</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-less" data-lang="less"><span class="hljs-class">.self-start</span> {
    <span class="hljs-attribute">align-self</span>: flex-start;
}
<span class="hljs-class">.self-center</span> {
    <span class="hljs-attribute">align-self</span>: center;
}
<span class="hljs-class">.self-end</span> {
    <span class="hljs-attribute">align-self</span>: flex-end;
}
<span class="hljs-class">.self-stretch</span> {
    <span class="hljs-attribute">align-self</span>: stretch;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>align-items</code>のflex itemsバージョン。<code>stretch</code>は余白ができた場合にそれを埋めるように引き伸ばして表示します。</p>
</div>
<div class="paragraph">
<p><code>align-items</code>にもあるんだけど<code>baseline</code>はPolymerのlayoutには用意されていなかったので自分も追加しませんでした。使うような場面も思いつきません。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="layout-less">完成ファイル</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://gist.github.com/hbsnow/2f9e817af0514337fb57">layout.less</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bibliography">参照文献</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a href="http://www.w3.org/TR/css-flexbox-1/">CSS Flexible Box Layout Module Level 1</a></p>
</li>
<li>
<p><a href="https://github.com/Polymer/layout">Polymer/layout</a></p>
</li>
</ul>
</div>
</div>
</div></div></div></article>